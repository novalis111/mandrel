# Mandrel Command Backend Environment Configuration
# =================================================
# Copy this file to .env: cp .env.example .env
# These defaults work with docker-compose out of the box!

# ===========================================
# DATABASE (matches docker-compose defaults)
# ===========================================
DATABASE_USER=mandrel
DATABASE_HOST=localhost
DATABASE_NAME=aidis_production
DATABASE_PASSWORD=mandrel_dev_password
DATABASE_PORT=5432

# ===========================================
# AUTHENTICATION
# ===========================================
# IMPORTANT: Change JWT_SECRET in production!
JWT_SECRET=mandrel-dev-secret-change-in-production-minimum-32-chars
JWT_EXPIRES_IN=24h
BCRYPT_ROUNDS=12

# ===========================================
# OPTIONAL VARIABLES (HAVE DEFAULTS)
# ===========================================

# Server Configuration
# Preferred: Use MANDREL_* prefix
MANDREL_HTTP_PORT=5000
MANDREL_MCP_PORT=8080

# Legacy: AIDIS_* and PORT (deprecated, use MANDREL_* instead)
# PORT=5000
# AIDIS_HTTP_PORT=5000
# AIDIS_MCP_PORT=8080

NODE_ENV=development

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# Logging Configuration
LOG_LEVEL=info
DB_LOG_LEVEL=warn
ENABLE_LOG_ROTATION=true
LOG_MAX_FILE_SIZE=20m
LOG_MAX_FILES=30d

# ===========================================
# FEATURE FLAGS
# ===========================================

# Phase 1 Features
FEATURE_FLAG_PHASE1_FEATURE_FLAGS=false
FEATURE_FLAG_PHASE1_CONTRACT_TESTS=false
FEATURE_FLAG_PHASE1_REACT_ERROR_BOUNDARIES=false

# ===========================================
# DEVELOPMENT/STAGING VARIABLES
# ===========================================

# Frontend URL (for CORS in development)
FRONTEND_URL=http://localhost:3000

# ===========================================
# EXTERNAL SERVICES (OPTIONAL)
# ===========================================

# Monitoring & Analytics (when implemented)
# SENTRY_DSN=https://your-sentry-dsn
# DATADOG_API_KEY=your-datadog-key

# External secrets management (when implemented)
# VAULT_URL=https://vault.example.com
# AWS_SSM_PARAMETER_PREFIX=/aidis/

# ===========================================
# LEGACY SUPPORT (BACKWARDS COMPATIBILITY)
# ===========================================

# MANDREL_* → AIDIS_* → Legacy fallback chain
# Priority: MANDREL_* (preferred) > AIDIS_* (deprecated) > Legacy (fallback)

# Authentication (MANDREL_JWT_SECRET > AIDIS_JWT_SECRET > JWT_SECRET)
# Database URL (MANDREL_DATABASE_URL > AIDIS_DATABASE_URL > constructed from DATABASE_*)
# HTTP Port (MANDREL_HTTP_PORT > AIDIS_HTTP_PORT > PORT)

# Legacy database variables (mapped to DATABASE_* above)
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=aidis_production
# DB_USER=ridgetop
# DB_PASSWORD=your-password